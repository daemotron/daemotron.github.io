<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Colours in Django Models - My Universe</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Colours in Django Models">
    <meta name="twitter:description" content="">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Colours in Django Models">
    <meta property="og:description" content="">

    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="/apple-touch-icon-precomposed.png" rel="apple-touch-icon">

    <link rel="stylesheet" type="text/css" href="//daemotron.github.io/themes/daemonic/assets/css/daemonic.css?v=1510146777543" />

    <link rel="canonical" href="https://daemotron.github.io/2017/11/08/Colours-in-Django-Models.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="My Universe" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Colours in Django Models" />
    <meta property="og:description" content="Colours are quite a common property to real world objects. So naturally when building web applications, sooner or later one encounters the need to assign a colour attribute to an object. For Django developers, this usually means adding a models.CharField to their model, ready to capture the colour&amp;#8217;" />
    <meta property="og:url" content="https://daemotron.github.io/2017/11/08/Colours-in-Django-Models.html" />
    <meta property="article:published_time" content="2017-11-08T00:00:00.000Z" />
    <meta property="article:tag" content="Development" />
    <meta property="article:tag" content="Python" />
    <meta property="article:tag" content="Django" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Colours in Django Models" />
    <meta name="twitter:description" content="Colours are quite a common property to real world objects. So naturally when building web applications, sooner or later one encounters the need to assign a colour attribute to an object. For Django developers, this usually means adding a models.CharField to their model, ready to capture the colour&amp;#8217;" />
    <meta name="twitter:url" content="https://daemotron.github.io/2017/11/08/Colours-in-Django-Models.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "My Universe",
    "author": {
        "@type": "Person",
        "name": "Jesco Freund",
        "image": "https://avatars1.githubusercontent.com/u/461745?v=4",
        "url": "https://daemotron.github.io/author/daemotron/",
        "sameAs": "http://www.my-universe.com"
    },
    "headline": "Colours in Django Models",
    "url": "https://daemotron.github.io/2017/11/08/Colours-in-Django-Models.html",
    "datePublished": "2017-11-08T00:00:00.000Z",
    "keywords": "Development, Python, Django",
    "description": "Colours are quite a common property to real world objects. So naturally when building web applications, sooner or later one encounters the need to assign a colour attribute to an object. For Django developers, this usually means adding a models.CharField to their model, ready to capture the colour&amp;#8217;"
}
    </script>

    <meta name="generator" content="HubPress" />
    <link rel="alternate" type="application/rss+xml" title="My Universe" href="https://daemotron.github.io/rss/" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/atom-one-dark.min.css">
    
        <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

</head>
<body class="post-template tag-Development tag-Python tag-Django no-js">

    <span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
    </span>

    <header class="panel-cover panel-cover--collapsed " >
      <div class="panel-main">
    
        <div class="panel-main__inner panel-inverted">
        <div class="panel-main__content">
    
            <h1 class="panel-cover__title panel-title"><a href="https://daemotron.github.io" title="link to homepage for My Universe">My Universe</a></h1>
            <hr class="panel-cover__divider" />
            <p class="panel-cover__description">Mens Insana In Corpore Ignavo</p>
            <hr class="panel-cover__divider panel-cover__divider--secondary" />
    
            <div class="navigation-wrapper">
    
              <nav class="cover-navigation cover-navigation--primary">
                <ul class="navigation">
                  <li class="navigation__item"><a href="https://daemotron.github.io/#blog" title="link to My Universe blog" class="blog-button">Blog</a></li>
                </ul>
              </nav>
    
              
              
              <nav class="cover-navigation navigation--social">
                <ul class="navigation">
              
              
              
              
                  <!-- Github -->
                  <li class="navigation__item">
                    <a href="https://github.com/daemotron" title="Github account">
                      <i class='icon icon-social-github'></i>
                      <span class="label">Github</span>
                    </a>
                  </li>
                  </li>
              
              
              
              
                  <!-- LinkedIn -->
                  <li class="navigation__item">
                    <a href="https://www.linkedin.com/in/jescofreund" title="LinkedIn account">
                      <i class='icon icon-social-linkedin'></i>
                      <span class="label">LinkedIn</span>
                    </a>
                  </li>
              
                  <!-- LinkedIn -->
                  <li class="navigation__item">
                    <a href="http://stackoverflow.com/users/5217009/daemotron" title="StackOverflow account">
                      <i class='icon icon-social-stack-overflow'></i>
                      <span class="label">StackOverflow</span>
                    </a>
                  </li>
              
              
                </ul>
              </nav>
              
    
            </div>
    
          </div>
    
        </div>
    
        <div class="panel-cover--overlay"></div>
      </div>
    </header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            

  <article class="post-container post-container--single">

    <header class="post-header">
      <div class="post-meta">
        <time datetime="08 Nov 2017" class="post-meta__date date">08 Nov 2017</time> &#8226; <span class="post-meta__tags tags">on <a href="https://daemotron.github.io/tag/Development/">Development</a>, <a href="https://daemotron.github.io/tag/Python/">Python</a>, <a href="https://daemotron.github.io/tag/Django/">Django</a></span>
        <span class="post-meta__author author"><img src="https://avatars1.githubusercontent.com/u/461745?v&#x3D;4" alt="profile image for Jesco Freund" class="avatar post-meta__avatar" /> by Jesco Freund</span>
      </div>
      <h1 class="post-title">Colours in Django Models</h1>
    </header>

    <section class="post tag-Development tag-Python tag-Django">
      <div class="paragraph">
<p>Colours are quite a common property to real world objects. So naturally when building web applications, sooner or later one encounters the need to assign a colour attribute to an object. For <a href="https://djangoproject.com">Django</a> developers, this usually means adding a <code>models.CharField</code> to their model, ready to capture the colour&#8217;s <a href="https://en.wikipedia.org/wiki/Web_colors#Hex_triplet">hex code</a>.</p>
</div>
<div class="paragraph">
<p>Technically this works pretty well, as those hex codes can directly be used in HTML style attributes, embedded SVG drawings, etc. However, setting colour values via text input widget is quite tedious. On the frontend side, various libraries offer quite elaborate solutions for integrating nice colour picking widgets. For the Django admin, there is however a quite simple solution: use HTML 5 color inputs!</p>
</div>
<div class="paragraph">
<p>To achieve this, we need to define a custom data type, alongside with a custom widget. Let&#8217;s start with the widget, as it has no further dependencies, but is later needed to define the custom data type. I prefer encapsulating widgets in their own Python module within a Django application, usually centralizing them in <code>widgets.py</code>. The code would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class ColorWidget(Input):
    input_type = 'color'
    template_name = 'myapp/forms/widgets/color.html'</code></pre>
</div>
</div>
<div class="paragraph">
<p>OK, looks as if we had to somewhere store a template. Frankly speaking, you could also use <code>django/forms/widgets/text.html</code>; it wouldn&#8217;t make any difference. I just think that when using custom stuff, it&#8217;s better to use a custom copy&#8201;&#8212;&#8201;you never know what they&#8217;ll be modifying with the next Django release&#8230;&#8203; The template is extremely simple and looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">{% include "django/forms/widgets/input.html" %}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now finally we need the custom data type. As Django keeps its data types all in <code>django.db.models</code>, I consider it ok to define the one extra custom data type within my <code>models.py</code>. However, if there are more custom types needed, I would separate them in their own module and just import them. The colour data type using our custom widget looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class ColorField(models.CharField):
    def __init__(self, *args, **kwargs):
        kwargs['max_length'] = 10
        super(ColorField, self).__init__(*args, **kwargs)

    def formfield(self, **kwargs):
        kwargs['widget'] = ColorWidget
        return super(ColorField, self).formfield(**kwargs)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Overwriting the constructor is not absolutely necessary, but it offers a nice way to ensure the field length is sufficient for capturing colour codes. Please also note that in this example, the legacy notation for <code>super()</code> has been used. Python 3 only developers can of course use the modern <code>super()</code> notation.</p>
</div>
<div class="paragraph">
<p>Using this new custom data type is straight forward - in your model, use it like any other data type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class ShinyThing(models.Model):
    color = ColorField(default='#ffffff')</code></pre>
</div>
</div>
<div class="paragraph">
<p>That&#8217;s it&#8201;&#8212;&#8201;no fiddling with JavaScript libraries, custom forms etc. Maybe this is not the most sophisticated solution, but I find it&#8217;s quite good and proved to be sufficient in many cases, where colour editing in the Django admin was more an "every now and then" story.</p>
</div>
    </section>

  </article>

  
  <section class="post-comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'daemotron'; // required: replace example with your forum shortname
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </section>
  



            <footer class="footer">
                <span class="footer__copyright">&copy; 2017. All rights reserved.</span>
                <span class="footer__copyright">Proudly published with <a href="http://hubpress.io" title="link to Hubpress website">Hubpress</a></span>
            </footer>
        </div>
    </div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();
      </script>

    <script type="text/javascript" src="//daemotron.github.io/themes/daemonic/assets/js/main.js?v=1510146777543"></script>

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-100065581-1', 'auto');
    ga('send', 'pageview');

    </script>

</body>
</html>
