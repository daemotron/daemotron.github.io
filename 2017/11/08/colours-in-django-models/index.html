<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Colours in Django Models | My Universe</title><meta name=author content="daemotron"><meta name=description content="Colours are quite a common property to real world objects. So naturally when building web applications, sooner or later one encounters the need to assign a colour attribute to an object. For Django developers, this usually means adding a models.CharField to their model, ready to capture the colour&rsquo;s hex code.
Technically this works pretty well, as those hex codes can directly be used in HTML style attributes, embedded SVG drawings, etc."><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Colours in Django Models"><meta name=twitter:description content="Colours are quite a common property to real world objects. So naturally when building web applications, sooner or later one encounters the need to assign a colour attribute to an object. For Django developers, this usually means adding a models.CharField to their model, ready to capture the colour&rsquo;s hex code.
Technically this works pretty well, as those hex codes can directly be used in HTML style attributes, embedded SVG drawings, etc."><meta property="og:title" content="Colours in Django Models"><meta property="og:description" content="Colours are quite a common property to real world objects. So naturally when building web applications, sooner or later one encounters the need to assign a colour attribute to an object. For Django developers, this usually means adding a models.CharField to their model, ready to capture the colour&rsquo;s hex code.
Technically this works pretty well, as those hex codes can directly be used in HTML style attributes, embedded SVG drawings, etc."><meta property="og:type" content="article"><meta property="og:url" content="https://daemotron.github.io/2017/11/08/colours-in-django-models/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-11-08T00:00:00+00:00"><meta property="article:modified_time" content="2017-11-08T00:00:00+00:00"><link rel=stylesheet href=/css/bootstrap.min.css crossorigin=anonymous><link href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css rel=stylesheet type=text/css><link rel=stylesheet href=/sass/main.css><link rel=stylesheet href=/zoomjs/zoom.min.css><script src=/js/lazysizes.min.js></script>
<link rel=apple-touch-icon href=/apple-touch-icon.png><link rel="shortcut icon" href=/favicon.png type=image/x-icon><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=icon href=/logo.svg sizes=any type=image/svg+xml></head><body><nav class="navbar navbar-default navbar-custom navbar-fixed-top invert"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=https://daemotron.github.io/>My Universe</a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=/ title=Home>Home</a></li><li><a href=/archive/ title=Archive>Archive</a></li><li><a href=/about/ title=About>About</a></li><li><a href=https://github.com/daemotron/daemotron.github.io/ title=Github>Github</a></li><li class=search-icon><a href=javascript:void(0)><i class="fa fa-search"></i></a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse"),__HuxNav__={close:function(){$navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)},open:function(){$collapse.style.height="auto",$navbar.className+=" in"}};$toggle.addEventListener("click",function(){$navbar.className.indexOf("in")>0?__HuxNav__.close():__HuxNav__.open()}),document.addEventListener("click",function(e){if(e.target==$toggle)return;if(e.target.className=="icon-bar")return;__HuxNav__.close()})</script><div class=search-page><div class=search-icon-close-container><span class=search-icon-close><i class="fa fa-chevron-down"></i></span></div><div class="search-main container"><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><form></form><input type=text id=search-input placeholder="$ grep..."></form><div id=search-results class=mini-post-list></div></div></div></div></div><style type=text/css>header.intro-header{position:relative;background-image:url('')}</style><header class="intro-header style-text"><div class=header-mask></div><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><div class=tags><a class=tag href=/tags/development/ title=development>development</a>
<a class=tag href=/tags/python/ title=python>python</a>
<a class=tag href=/tags/django/ title=django>django</a></div><h1>Colours in Django Models</h1><h2 class=subheading></h2><span class=meta>Posted by daemotron
on Wed, Nov 8, 2017</span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container"><p>Colours are quite a common property to real world objects. So naturally when building web applications, sooner or later one encounters the need to assign a colour attribute to an object. For <a href=https://djangoproject.com target=_blank>Django</a> developers, this usually means adding a <code>models.CharField</code> to their model, ready to capture the colour&rsquo;s <a href=https://en.wikipedia.org/wiki/Web_colors#Hex_triplet target=_blank>hex code</a>.</p><p>Technically this works pretty well, as those hex codes can directly be used in HTML style attributes, embedded SVG drawings, etc. However, setting colour values via text input widget is quite tedious. On the frontend side, various libraries offer quite elaborate solutions for integrating nice colour picking widgets. For the Django admin, there is however a quite simple solution: use HTML 5 color inputs!</p><p>To achieve this, we need to define a custom data type, alongside with a custom widget. Let&rsquo;s start with the widget, as it has no further dependencies, but is later needed to define the custom data type. I prefer encapsulating widgets in their own Python module within a Django application, usually centralizing them in <code>widgets.py</code>. The code would look like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>ColorWidget</span>(Input):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    input_type <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;color&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>    template_name <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;myapp/forms/widgets/color.html&#39;</span>
</span></span></code></pre></div><p>OK, looks as if we had to somewhere store a template. Frankly speaking, you could also use <code>django/forms/widgets/text.html</code>; it wouldn&rsquo;t make any difference. I just think that when using custom stuff, it&rsquo;s better to use a custom copy &mdash; you never know what they&rsquo;ll be modifying with the next Django release&mldr; The template is extremely simple and looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-django data-lang=django><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6>{%</span> <span style=color:#ff79c6>include</span> <span style=color:#f1fa8c>&#34;django/forms/widgets/input.html&#34;</span> <span style=color:#ff79c6>%}</span>
</span></span></code></pre></div><p>Now finally we need the custom data type. As Django keeps its data types all in <code>django.db.models</code>, I consider it ok to define the one extra custom data type within my <code>models.py</code>. However, if there are more custom types needed, I would separate them in their own module and just import them. The colour data type using our custom widget looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>ColorField</span>(models<span style=color:#ff79c6>.</span>CharField):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    <span style=color:#ff79c6>def</span> __init__(self, <span style=color:#ff79c6>*</span>args, <span style=color:#ff79c6>**</span>kwargs):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>        kwargs[<span style=color:#f1fa8c>&#39;max_length&#39;</span>] <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>10</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>        <span style=color:#8be9fd;font-style:italic>super</span>(ColorField, self)<span style=color:#ff79c6>.</span>__init__(<span style=color:#ff79c6>*</span>args, <span style=color:#ff79c6>**</span>kwargs)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>formfield</span>(self, <span style=color:#ff79c6>**</span>kwargs):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>        kwargs[<span style=color:#f1fa8c>&#39;widget&#39;</span>] <span style=color:#ff79c6>=</span> ColorWidget
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>        <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>super</span>(ColorField, self)<span style=color:#ff79c6>.</span>formfield(<span style=color:#ff79c6>**</span>kwargs)
</span></span></code></pre></div><p>Overwriting the constructor is not absolutely necessary, but it offers a nice way to ensure the field length is sufficient for capturing colour codes. Please also note that in this example, the legacy notation for <code>super()</code> has been used. Python 3 only developers can of course use the modern <code>super()</code> notation.</p><p>Using this new custom data type is straight forward &mdash; in your model, use it like any other data type:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>ShinyThing</span>(models<span style=color:#ff79c6>.</span>Model):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    color <span style=color:#ff79c6>=</span> ColorField(default<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;#ffffff&#39;</span>)
</span></span></code></pre></div><p>That&rsquo;s it &mdash; no fiddling with JavaScript libraries, custom forms etc. Maybe this is not the most sophisticated solution, but I find it&rsquo;s quite good and proved to be sufficient in many cases, where colour editing in the Django admin was more an &ldquo;every now and then&rdquo; story.</p><hr style=visibility:hidden><ul class=pager><li class=previous><a href=/2017/05/28/pythonic-distance-conversion/ data-toggle=tooltip data-placement=top title="Pythonic Distance Conversion">Previous<br><span>Pythonic Distance Conversion</span></a></li><li class=next><a href=/2023/01/03/reload-2023/ data-toggle=tooltip data-placement=top title="Reload 2023">Next<br><span>Reload 2023</span></a></li></ul><hr style=visibility:hidden></div><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
sidebar-container"><section><hr class="hidden-sm hidden-xs"><h5>FEATURED TAGS</h5><div class=tags><a href=/tags/blog/>blog</a>
<a href=/tags/c/c++/>c/c++</a>
<a href=/tags/cmake/>cmake</a>
<a href=/tags/development/>development</a>
<a href=/tags/django/>django</a>
<a href=/tags/git/>git</a>
<a href=/tags/github/>github</a>
<a href=/tags/hubpress/>hubpress</a>
<a href=/tags/hugo/>hugo</a>
<a href=/tags/python/>python</a>
<a href=/tags/x-plane/>x-plane</a></div></section></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a href=https://github.com/daemotron target=_blank><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/jescofreund target=_blank><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://gitlab.com/daemotron target=_blank><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i>
<i class="fab fa-gitlab fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://stackoverflow.com/users/5217009/daemotron target=_blank><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i>
<i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i></span></a></li><li><a href=/index.xml target=_blank><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; My Universe 2023<br>Powered by <a href=https://gohugo.io>Hugo</a></p></div></div></div></footer><script src=/js/jquery.min.js></script>
<script src=/js/bootstrap.min.js crossorigin=anonymous></script>
<script src=/js/hux-blog.min.c4ea77041cd3edbfc8b2622cd887a9a5d8760a4162d14489e36d2a3fa4c90172.js></script>
<script src=/js/simple-jekyll-search.min.js></script>
<script src=/js/search.min.53bce5da475b4d362500e5ce5dddfa22e20e1b9018777411d2020b4b839c9310.js></script>
<script src=/zoomjs/zoom.min.js></script></body></html>