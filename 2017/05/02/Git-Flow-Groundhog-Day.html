<!DOCTYPE html>
<html>
  <head>
    <title>GitFlow Groundhog Day</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    
    <link rel="apple-touch-icon" sizes="57x57" href="//daemotron.github.io/themes/uno-zen/assets/img/apple-touch-icon-57x57.png?v=wAAv6Wqe6l?v=1495998380854">
    <link rel="apple-touch-icon" sizes="60x60" href="//daemotron.github.io/themes/uno-zen/assets/img/apple-touch-icon-60x60.png?v=wAAv6Wqe6l?v=1495998380854">
    <link rel="apple-touch-icon" sizes="72x72" href="//daemotron.github.io/themes/uno-zen/assets/img/apple-touch-icon-72x72.png?v=wAAv6Wqe6l?v=1495998380854">
    <link rel="apple-touch-icon" sizes="76x76" href="//daemotron.github.io/themes/uno-zen/assets/img/apple-touch-icon-76x76.png?v=wAAv6Wqe6l?v=1495998380854">
    <link rel="apple-touch-icon" sizes="114x114" href="//daemotron.github.io/themes/uno-zen/assets/img/apple-touch-icon-114x114.png?v=wAAv6Wqe6l?v=1495998380854">
    <link rel="apple-touch-icon" sizes="120x120" href="//daemotron.github.io/themes/uno-zen/assets/img/apple-touch-icon-120x120.png?v=wAAv6Wqe6l?v=1495998380854">
    <link rel="apple-touch-icon" sizes="144x144" href="//daemotron.github.io/themes/uno-zen/assets/img/apple-touch-icon-144x144.png?v=wAAv6Wqe6l?v=1495998380854">
    <link rel="apple-touch-icon" sizes="152x152" href="//daemotron.github.io/themes/uno-zen/assets/img/apple-touch-icon-152x152.png?v=wAAv6Wqe6l?v=1495998380854">
    <link rel="apple-touch-icon" sizes="180x180" href="//daemotron.github.io/themes/uno-zen/assets/img/apple-touch-icon-180x180.png?v=wAAv6Wqe6l?v=1495998380854">
    <link rel="icon" type="image/png" href="//daemotron.github.io/themes/uno-zen/assets/img/favicon-32x32.png?v=wAAv6Wqe6l?v=1495998380854" sizes="32x32">
    <link rel="icon" type="image/png" href="//daemotron.github.io/themes/uno-zen/assets/img/favicon-194x194.png?v=wAAv6Wqe6l?v=1495998380854" sizes="194x194">
    <link rel="icon" type="image/png" href="//daemotron.github.io/themes/uno-zen/assets/img/favicon-96x96.png?v=wAAv6Wqe6l?v=1495998380854" sizes="96x96">
    <link rel="icon" type="image/png" href="//daemotron.github.io/themes/uno-zen/assets/img/android-chrome-192x192.png?v=wAAv6Wqe6l?v=1495998380854" sizes="192x192">
    <link rel="icon" type="image/png" href="//daemotron.github.io/themes/uno-zen/assets/img/favicon-16x16.png?v=wAAv6Wqe6l?v=1495998380854" sizes="16x16">
    <link rel="manifest" href="//daemotron.github.io/themes/uno-zen/assets/img/manifest.json?v=wAAv6Wqe6l?v=1495998380854">
    <link rel="shortcut icon" href="//daemotron.github.io/themes/uno-zen/assets/img/favicon.ico?v=wAAv6Wqe6l?v=1495998380854">
    <meta name="msapplication-TileColor" content="#e74c3c">
    <meta name="msapplication-TileImage" content="//daemotron.github.io/themes/uno-zen/assets/img/mstile-144x144.png?v=wAAv6Wqe6l?v=1495998380854">
    <meta name="msapplication-config" content="//daemotron.github.io/themes/uno-zen/assets/img/browserconfig.xml?v=wAAv6Wqe6l?v=1495998380854">
    <meta name="theme-color" content="#e74c3c">
    <link rel="stylesheet" type="text/css" href="//daemotron.github.io/themes/uno-zen/assets/css/uno-zen.css?v=1495998380854" />
    <link rel="canonical" href="https://daemotron.github.io/2017/05/02/Git-Flow-Groundhog-Day.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="My Universe" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="GitFlow Groundhog Day" />
    <meta property="og:description" content="Yes, this is all over again the old discussion about what&amp;#8217;s the best branching model for projects using Git as their version control system. I know, there are countless blog posts (e. g. 1, 2, or 3) about that topic out there&amp;#8230;&amp;#8203; yet, I feel most" />
    <meta property="og:url" content="https://daemotron.github.io/2017/05/02/Git-Flow-Groundhog-Day.html" />
    <meta property="article:published_time" content="2017-05-02T00:00:00.000Z" />
    <meta property="article:tag" content="Development" />
    <meta property="article:tag" content="Git" />
    <meta property="article:tag" content="GitHub" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="GitFlow Groundhog Day" />
    <meta name="twitter:description" content="Yes, this is all over again the old discussion about what&amp;#8217;s the best branching model for projects using Git as their version control system. I know, there are countless blog posts (e. g. 1, 2, or 3) about that topic out there&amp;#8230;&amp;#8203; yet, I feel most" />
    <meta name="twitter:url" content="https://daemotron.github.io/2017/05/02/Git-Flow-Groundhog-Day.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "My Universe",
    "author": {
        "@type": "Person",
        "name": "Jesco Freund",
        "image": "https://avatars2.githubusercontent.com/u/461745?v=3",
        "url": "https://daemotron.github.io/author/daemotron/",
        "sameAs": "http://www.my-universe.com"
    },
    "headline": "GitFlow Groundhog Day",
    "url": "https://daemotron.github.io/2017/05/02/Git-Flow-Groundhog-Day.html",
    "datePublished": "2017-05-02T00:00:00.000Z",
    "keywords": "Development, Git, GitHub",
    "description": "Yes, this is all over again the old discussion about what&amp;#8217;s the best branching model for projects using Git as their version control system. I know, there are countless blog posts (e. g. 1, 2, or 3) about that topic out there&amp;#8230;&amp;#8203; yet, I feel most"
}
    </script>

    <meta name="generator" content="HubPress" />
    <link rel="alternate" type="application/rss+xml" title="My Universe" href="https://daemotron.github.io/rss/" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/atom-one-dark.min.css">
  </head>
  <body class="post-template tag-Development tag-Git tag-Git-Hub">
    <header id="menu-button" class="expanded">
      <a><i class="icon icon-list"></i></a>
    </header>
    <aside class="cover" style="background: url() center/cover no-repeat fixed">
      <div class="cover container">
        <div class="profile">
    
          <hr class="divider long" />
          <p>Mens Insana In Corpore Ignavo</p>
          <hr class="divider short" />
          <div class="navigation">
            <div class="profile contact">
              
              <nav class="navigation right">
                <ul class="social expanded">
              
              
              
              
                  <!-- Github -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://github.com/daemotron" title="Github account">
                      <i class='icon icon-social-github'></i>
                      <span class="label">Github</span>
                    </a>
                  </li>
                  </li>
              
              
              
              
                  <!-- LinkedIn -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://www.linkedin.com/in/jescofreund" title="LinkedIn account">
                      <i class='icon icon-social-linkedin'></i>
                      <span class="label">LinkedIn</span>
                    </a>
                  </li>
              
              
                </ul>
              </nav>
              <!-- <section class="icon icon-search" id="search-container">
      <hr class="divider short" />
      <form id="search-form">
        <input type="text", name="search", placeholder="git, css, javascript,..." id="search-field" />
      </form>
    </section>
     -->
            </div>
          </div>
        </div>
      </div>
    </aside>
    <main>
      <section id="search-results"></section>
      <section class="content">
        

  <article class="post tag-Development tag-Git tag-Git-Hub">
    <header>
      <div class="post meta">
        <time datetime="02 May 2017">02 May 2017</time>
        <span class="post tags">in <a href="https://daemotron.github.io/tag/Development/">Development</a> <a href="https://daemotron.github.io/tag/Git/">Git</a> <a href="https://daemotron.github.io/tag/Git-Hub/">GitHub</a></span>


        <span class="post reading-time"> ~ <span></span> read.</span>
      </div>
      <a alt="Tweet 'GitFlow Groundhog Day'" href="https://twitter.com/intent/tweet?text=GitFlow%20Groundhog%20Day%20%C2%BB&amp;hashtags=Development,Git,GitHub&amp;url=https://daemotron.github.io/2017/05/02/Git-Flow-Groundhog-Day.html">
        
        <h1 class="icon-reverse icon-social-twitter-post" id="post-title">GitFlow Groundhog Day</h1>
      </a>
    </header>

    <div id="post-content" class="post tag-Development tag-Git tag-Git-Hub">
      <div class="paragraph">
<p>Yes, this is all over again the old discussion about what&#8217;s the best branching
model for projects using <a href="https://git-scm.com/">Git</a> as their version control
system. I know, there are countless blog posts
(e. g. <a href="http://nvie.com/posts/a-successful-git-branching-model/">1</a>,
<a href="https://guides.github.com/introduction/flow/">2</a>, or
<a href="https://barro.github.io/2016/02/a-succesful-git-branching-model-considered-harmful/">3</a>)
about that topic out there&#8230;&#8203; yet, I feel most of the discussion is focused on
projects with continuous deployment (i. e. mostly web applications), whereas
classical desktop software with classical release cycles are rather
underrepresented.</p>
</div>
<div class="paragraph">
<p>First, some thoughts on what I actually need, before creating any new ideas
others put already in the bin due to being unfit&#8230;&#8203; When hacking on a desktop
software or an operating system (i. e. something that will be deployed on
many systems, by many people, without me as developer being aware), it all
comes down to releases. People are used to releases, updates etc. being clearly
labelled with a <a href="http://semver.org/">semantic version</a> designator. This is no
different from what you should do for SAAS web applications&#8201;&#8212;&#8201;what&#8217;s really
different here is that for desktop applications, several supported versions
can exist in parallel. So for me, a good branching model should</p>
</div>
<div class="ulist">
<ul>
<li>
<p>limit to one eternal branch (have most recent <strong>working</strong> code in <code>master</code>)</p>
</li>
<li>
<p>use feature branches to change the code in <code>master</code></p>
</li>
<li>
<p>support maintenance of several active releases in parallel</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So, why not have a look at what are other open source developers doing? Well,
that proved to be easier said than done. I&#8217;m quite familiar with
<a href="https://www.freebsd.org/doc/en/books/dev-model/release-branches.html">FreeBSD&#8217;s branching model</a>,
but it is rather old-school, was ported from CVS to Subversion and seems to have
<a href="https://wiki.freebsd.org/GitDrawbacks">some misfits with Git</a> (of course the
linked article blames Git, but that means vice versa if Git is otherwise
considered good or is mandatory to be used, the FreeBSD branching model doesn&#8217;t
fit well with Git).</p>
</div>
<div class="paragraph">
<p>But what about more recent projects, that were not ported from older version
control systems? Well, there are some, like <a href="https://atom.io/">Atom</a> and
<a href="https://electron.atom.io/">Electron</a>. Both would be perfect samples, as they
use semantic versions, have no continuous deployment and are managed by
GitHub&#8201;&#8212;&#8201;they could be great role models about how Git in general and GitHub
in particular are meant to be used for this type of project. I wrote "would" and
"could" since both projects didn&#8217;t document their branching model anywhere. Of
course that didn&#8217;t prevent me from reviewing both projects' repository structure
in order to explore what branches I would find there. For Electron, I couldn&#8217;t
really figure a structure, but for Atom, there seems to be one:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://daemotron.github.io/images/2017/05/02/atom-git-branches.png" alt="Atom Git Branches">
</div>
</div>
<div class="paragraph">
<p>Seemingly, Atom uses dedicated branches for releases, and tags on these branches
to mark published releases. This would be quite in line with what
<a href="http://www.bitsnbites.eu/author/m/">Marcus Geelnard</a> proposes in his
<a href="http://www.bitsnbites.eu/a-stable-mainline-branching-model-for-git/">stable mainline branching model for Git</a>.
At a first glance, this seems to be the only acceptable model also satisfying
my third requirement, i. e. the maintenance of several active releases in
parallel, that are not nice sequences. This feels quite close from what I know
from FreeBSD&#8201;&#8212;&#8201;<code>master</code> corresponds to <code>head</code>, and the release branches
correspond to FreeBSD&#8217;s <code>releng</code> branches.</p>
</div>
<div class="paragraph">
<p>However, there&#8217;s another branching model that looks quite appealing to me:
<a href="http://endoflineblog.com/about">Adam Ruka</a>'s
<a href="http://endoflineblog.com/oneflow-a-git-branching-model-and-workflow">OneFlow</a>
model (the post is quite recent, but the idea of that model already dates back
to his first article on the subject,
<a href="http://endoflineblog.com/gitflow-considered-harmful">GitFlow considered harmful</a>).
True, in the preamble it already says:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The main condition that needs to be satisfied in order to use OneFlow for a
project is that every new production release is based on the previous release</p>
</div>
<div class="paragraph">
<p>[...]</p>
</div>
<div class="paragraph">
<p>If your project needs to maintain multiple simultaneous yet incompatible release
versions that way, then OneFlow won&#8217;t work for you out of the box.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>But is that really true for my projects? For FreeBSD and Python it certainly
is&#8201;&#8212;&#8201;both projects work with two major releases, from which they continue to
derive also new minor releases. For my projects however, old versions would
still be supported with patch releases (e. g. in case of a security issue
detected), but new versions would only be derived from the current development
stage, i. e. from what can be found in <code>master</code>. So would the OneFlow model
work for me?</p>
</div>
<div class="paragraph">
<p>Honestly speaking, I can&#8217;t tell right now. There is one aspect about OneFlow
that intrigues me and at the same raises some questions: It&#8217;s about merging
back from release and hotfix branches. While I can mostly understand the idea
of merging hotfix stuff back into <code>master</code> (you probably want to fix the same
issue also on <code>master</code> that you just fixed on a release), I don&#8217;t understand the
concept of release branches, if they should be merged back. Let&#8217;s look at
several scenarios:</p>
</div>
<div class="paragraph">
<p>The trivial one: in preparation for a release, you need to bump the version
number of your project. Fine, but what does in this trivial scenario distinguish
a release branch from a mere feature branch? What is the value added for doing
it that way? I can only imagine it&#8217;s more convenient for projects with a bad
version information maintainability (e. g. maintaining version information for
several submodules like Electron has to do, or maintaining version information
in several files scattered across the project&#8217;s source tree). It also would mean
you have to stick to a certain sequence:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create the release branch</p>
</li>
<li>
<p>do your stuff on the release branch (bump version &amp; tag release)</p>
</li>
<li>
<p>you can create new feature branches off <code>master</code> in the meantime</p>
</li>
<li>
<p>merge the release branch back into <code>master</code> before any new feature branch
is allowed to be merged (i. e. apply a code freeze rule for <code>master</code>)</p>
</li>
<li>
<p>bump the version on <code>master</code> to the next RELENG working release</p>
</li>
<li>
<p>rebase all feature branches to the bumped <code>master</code></p>
</li>
<li>
<p>start merging back feature branches</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For me it would feel more natural to have a sequence like this one:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create a release branch</p>
</li>
<li>
<p>bump version on <code>master</code> to the next development release</p>
</li>
<li>
<p>rebase any feature branch to the bumped <code>master</code></p>
</li>
<li>
<p>do whatever has to be done on the release branch (version bump, release
candidates, &#8230;&#8203;)</p>
</li>
<li>
<p>tag the final version on the release branch</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The ugly aspect of this
<a href="https://barro.github.io/2016/02/a-succesful-git-branching-model-considered-harmful/">cactus model</a>
(that&#8217;s what <a href="https://barro.github.io/author/">Jussi Judin</a> calls it) is the
merging effort between the different branches. It allows the <code>master</code> branch
to strongly evolve while the release is being finished, which makes it hard to
keep fixes in sync between potentially several release branches, <code>master</code> and
feature branches. OneFlow solves this problem, but at the price of a necessary
code freeze in <code>master</code> during the release preparation period.</p>
</div>
<div class="paragraph">
<p>So it all comes down to one question: What happens in my repositories in
preparation for a release, and how strong can the <code>master</code> branch evolve during
that time? To be honest, when preparing a release, applying a code freeze on
<code>master</code> wouldn&#8217;t be that terrible a price to pay. Contrariwise, this could
help keeping the discipline to finalize a release before turning attention
towards other ventures, or consequently abandon a release attempt if too much
has to be fixed upfront. So indeed, OneFlow could generally fit my needs.</p>
</div>
<div class="paragraph">
<p>There&#8217;s just one point I would handle differently, and that is patch level
releases. For sure, a hotfix or patch release has to be based on the latest
previous release, but that could as well be a hotfix release itself (e. g.
2.3.2 would be based on 2.3.1). OneFlow is not really taking this into
consideration, so for me, I&#8217;m more or less back on
<a href="http://www.bitsnbites.eu/author/m/">Marcus Geelnard</a>'s
<a href="http://www.bitsnbites.eu/a-stable-mainline-branching-model-for-git/">stable mainline branching model for Git</a>,
but with one amendment taken from OneFlow:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://daemotron.github.io/images/2017/05/02/advanced-git-branching-model.png" alt="My Git Branching Model">
</div>
</div>
<div class="paragraph">
<p>So my personal branching model is a mix of the OneFlow and Cactus models:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>New features are developed in feature branches, leaving <code>master</code> as single
eternal branch (in accordance with OneFlow).</p>
</li>
<li>
<p><code>master</code> is a protected branch, so features have to be merged by pull requests
with all applicable code checks (CI, quality reviews) to be passed prior
merge (my own rule enhancement).</p>
</li>
<li>
<p>Alpha and beta pre-releases are managed via tags in <code>master</code>. Version bumps
and tags can be applied either as an override to the protected branch rule by
a repository administrator, or by using quick &amp; dirty pull requests (idea
shamelessly stolen from FreeBSD).</p>
</li>
<li>
<p>Release branches are branched off <code>master</code> after the beta phase has been
completed (this helps avoiding too many merges and rebasing between the
different branches).</p>
</li>
<li>
<p>Release candidates and the final release are managed as tags in the respective
release branch.</p>
</li>
<li>
<p>While a release branch is going through the pre-release phase, <code>master</code> is
under code freeze (i. e. no pull requests from feature branches shall be
merged during that time&#8201;&#8212;&#8201;that&#8217;s again my own conclusion).</p>
</li>
<li>
<p>After tagging a release branch as final (zero patch release), the release
branch shall merge back into <code>master</code> (introducing fixes made during the
release candidate phase&#8201;&#8212;&#8201;in line with OneFlow).</p>
</li>
<li>
<p>Once this merge has happened, the version in <code>master</code> shall be bumped to the
next upcoming release (suffixed with <code>-pre</code> or <code>-dev</code>&#8201;&#8212;&#8201;again shamelessly
copied from FreeBSD).</p>
</li>
<li>
<p>Once this has happened, all active feature branches need to be rebased onto
the most recent version of <code>master</code>. This implicitly also lifts the code
freeze previously imposed on <code>master</code> (again in line with OneFlow).</p>
</li>
<li>
<p>From the moment of the final release on, the release branch becomes a residual
maintenance branch, managed as protected branch (to avoid incidental
development in the wrong place&#8201;&#8212;&#8201;this is my own enhancement to OneFlow).</p>
</li>
<li>
<p>Post release patches (i. e. hot fixes) are managed within the residual release
branch (which becomes a maintenance branch after the final release).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With this set of rules, it should be fairly straight forward to manage projects
with sequential releases, but a need for hotfix releases also for older releases
otherwise not being developed any further.</p>
</div>
    </div>

    <div class="post related">

    </div>

    <footer class="post comments">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
        var disqus_shortname = 'daemotron'; // required: replace example with your forum shortname
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </footer>

  </article>


        <footer>
          <span class="copyright">
            &copy; 2017. All rights reserved. Built with <a href="https://github.com/Kikobeats/uno-zen" target="_blank">Uno Zen</a> under <a href="http://hubpress.io/" target="_blank">HubPress</a>.
          </span>
        </footer>
      </section>
    </main>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();
      </script>
       
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
    <script src="//daemotron.github.io/themes/uno-zen/assets/js/uno-zen.js?v=1495998380854" type="text/javascript" charset="utf-8"></script>
  </body>
</html>
