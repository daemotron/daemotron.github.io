<!doctype html><html itemscope itemtype=https://schema.org/WebPage class=no-js lang=en><head prefix="og: http://ogp.me/ns#"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=siteBaseUrl content="https://www.my-universe.com/"><meta name=author content="daemotron"><meta name=description content="Mens Insana in Corpore Ignavo"><meta name=keywords content="blog,developer,personal"><meta name=generator content="Hugo 0.142.0"><title>X-Plane Plugin Boilerplate | My Universe
</title><meta itemprop=name content="X-Plane Plugin Boilerplate"><meta itemprop=description content="X-Plane Plugin Boilerplate - Mens Insana in Corpore Ignavo"><meta property="og:site_name" content="My Universe"><meta property="og:url" content="https://www.my-universe.com/2023/01/04/x-plane-plugin-boilerplate/"><meta property="og:site_name" content="My Universe"><meta property="og:title" content="X-Plane Plugin Boilerplate"><meta property="og:description" content="X-Plane has a well-documented, accessible API, making it relatively easy to write plugins for the simulator. In this post I’m going to demonstrate how a basic plugin boilerplate can look like, and how to build it on different platforms.
Let’s get started with some basics: X-Plane plugins are dynamically linked libraries, which are loaded by X-Plane at runtime. They have to provide an API as defined by the X-Plane SDK, so X-Plane can access the plugin via defined entry points. The API documentation explains all this, and also provides examples for basic and more advanced plugins. For this post I am going to use a very barebone plugin which does nothing except existing in X-Plane."><meta property="og:locale" content="en_gb"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-04T15:28:28+01:00"><meta property="article:modified_time" content="2023-01-04T15:28:28+01:00"><meta property="article:tag" content="X-Plane"><meta property="article:tag" content="Development"><meta property="article:tag" content="C/C++"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><script src=/modernizr-simple.js></script><link rel=canonical href=https://www.my-universe.com/2023/01/04/x-plane-plugin-boilerplate/><link rel=stylesheet href=https://www.my-universe.com/theme.css></head><body class=bilberry-hugo-theme><nav><div class=container><ul class=topnav><li><a href=https://www.my-universe.com/page/about/>About</a></li><li><a href=https://www.my-universe.com/page/legal/>Legal</a></li></ul></div></nav><header><div class=container><div class=logo><a href=/ class=logo><img src=/img/avataaars.png alt>
<span class=overlay><i class="fa fa-home"></i></span></a></div><div class=titles><h3 class=title><a href=/>My Universe</a></h3><span class=subtitle>Mens Insana in Corpore Ignavo</span></div><div class=toggler><i class="fa fa-bars" aria-hidden=true></i></div></div></header><div class="main container"><div class="article-wrapper u-cf single"><a class=bubble href=https://www.my-universe.com/2023/01/04/x-plane-plugin-boilerplate/><i class="fas fa-fw fa-pencil-alt"></i></a><article class="default article"><div class=content><h1 class=article-title><a href=https://www.my-universe.com/2023/01/04/x-plane-plugin-boilerplate/>X-Plane Plugin Boilerplate</a></h1><div class=meta><span class="date moment">2023-01-04</span></div><p><a href=https://www.x-plane.com>X-Plane</a> has a well-documented, accessible <a href=https://developer.x-plane.com/sdk/>API</a>, making it relatively easy to write plugins for the simulator. In this post I&rsquo;m going to demonstrate how a basic plugin boilerplate can look like, and how to build it on different platforms.</p><p>Let&rsquo;s get started with some basics: X-Plane plugins are dynamically linked libraries, which are loaded by X-Plane at runtime. They have to provide an API as defined by the X-Plane SDK, so X-Plane can access the plugin via defined entry points. The <a href=https://developer.x-plane.com/sdk/>API documentation</a> explains all this, and also provides examples for basic and more advanced plugins. For this post I am going to use a very barebone plugin which does nothing except existing in X-Plane.</p><h4 id=the-furious-five>The Furious Five</h4><p>Any X-Plane plugin has to implement these five callbacks &mdash; together they constitute the most basic API any plugin must implement:</p><ul><li><code>XPluginStart</code> is called to initialize the plugin (e.g. when X-Plane starts)</li><li><code>XPluginStop</code> is called when the plugin is stopped (e.g. when X-Plane shuts down)</li><li><code>XPluginEnable</code> is called whenever the plugin gets enabled (e.g. via the plugin admin, or after having initialized the plugin)</li><li><code>XPluginDisable</code> is called whenever the plugin gets disabled (e.g. when X-Plane&rsquo;s configuration menu is opened)</li><li><code>XPluginReceiveMessage</code> is called when a message is sent to the plugin &mdash; either by X-Plane itself, or by a third-party plugin</li></ul><p>A plugin can have and register more callbacks, but these five are the mandatory minimum. An absolute barebone plugin could therefore look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#ff79c6>#include</span> <span style=color:#ff79c6>&lt;CHeaders/XPLM/XPLMPlugin.h&gt;</span><span style=color:#ff79c6>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#ff79c6></span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>PLUGIN_API <span style=color:#8be9fd>int</span> <span style=color:#50fa7b>XPluginStart</span>(<span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>outName, <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>outSig, <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>outDesc)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>    <span style=color:#50fa7b>strcpy</span>(outName, <span style=color:#f1fa8c>&#34;DaemoPlug&#34;</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>    <span style=color:#50fa7b>strcpy</span>(outSig, <span style=color:#f1fa8c>&#34;net.daemotron.plugin&#34;</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    <span style=color:#50fa7b>strcpy</span>(outDesc, <span style=color:#f1fa8c>&#34;The uber cool plugin that does absolutely nothing.&#34;</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>    <span style=color:#ff79c6>return</span> <span style=color:#bd93f9>1</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>PLUGIN_API <span style=color:#8be9fd>void</span> <span style=color:#50fa7b>XPluginStop</span>(<span style=color:#8be9fd>void</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>PLUGIN_API <span style=color:#8be9fd>void</span> <span style=color:#50fa7b>XPluginDisable</span>(<span style=color:#8be9fd>void</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>PLUGIN_API <span style=color:#8be9fd>int</span> <span style=color:#50fa7b>XPluginEnable</span>(<span style=color:#8be9fd>void</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>    <span style=color:#ff79c6>return</span> <span style=color:#bd93f9>1</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span>PLUGIN_API <span style=color:#8be9fd>void</span> <span style=color:#50fa7b>XPluginReceiveMessage</span>(XPLMPluginID inFrom, <span style=color:#8be9fd>int</span> inMsg, <span style=color:#8be9fd>void</span> <span style=color:#ff79c6>*</span>inParam)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span> 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span>}
</span></span></code></pre></div><p>Of course this code could be written more compactly, but in a fully working plugin, all these API functions will have to be implemented in order to make the plugin actually do something.</p><h4 id=organizing-files>Organizing Files</h4><p>There is no best practice on how to organise files of a plugin project. Here I&rsquo;m just showing you how I do organise things, since it fits well with my way of working. I use git for source code management, and I keep each plugin in its dedicated git repository. For building my plugins, I use <a href=https://cmake.org>CMake</a>. A typical plugin boilerplate using these tools looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>+--+ Project Root Directory
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>   |
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>   +--+ SDK/
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>   |
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>   +--+ src/
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>   |  |
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>   |  +-- collisions
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>   |  |
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>   |  +-- main.c
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>   |
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>   +-- .gitignore
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>   |
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>   +-- CMakeLists.txt
</span></span></code></pre></div><ul><li>The <code>SDK</code> folder contains the X-Plane SDK as downloaded from Laminar&rsquo;s <a href=https://developer.x-plane.com/sdk/plugin-sdk-downloads/>Developer Site</a>.</li><li>The <code>src</code> folder contains my source code files. I usually call the main file <code>main.c</code>, where the Furious Five are implemented.</li><li>The file <code>src/collisions</code> holds symbol names the linker needs to know about.</li><li>In the <code>.gitignore</code> file, I exclude the SDK and the <code>build</code> directory from git, and eventual folders created by an IDE or editor</li><li>The <code>CMkaeLists.txt</code> file contains the build instructions for the plugin</li></ul><p>The content of the <code>src/collisions</code> linker script looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span> global:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span> XPluginStart;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span> XPluginStop;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span> XPluginEnable;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span> XPluginDisable;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span> XPluginReceiveMessage;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span> local:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span> *;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>};
</span></span></code></pre></div><h4 id=building-the-plugin-on-windows>Building The Plugin On Windows</h4><p>With ~60%, Windows is the most-used operating system among X-Plane users<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>, so let&rsquo;s start with building the plugin for this platform. Again there are various options which compilers could be used. I picked the <a href=https://www.mingw-w64.org/>MinGW-w64</a> distribution provided by <a href=https://winlibs.com/>WinLibs</a>. On my system, I have both distributions, the Win64 and Win32 variant. The Win32 variant is only needed when building plugins for older versions of X-Plane (prior to 10.20). In this example I&rsquo;m going to focus on the 64 bit variant only &mdash; X-Plane 11 and newer only work with 64 bit plugins.</p><p>For this example, I used the <em>GCC 12.2.0 + LLVM/Clang/LLD/LLDB 15.0.6 + MinGW-w64 10.0.0 (UCRT) - release 3</em> package in Win64 flavour. Installing is straightforward: simply download the package and extract it with <a href=https://www.7-zip.org/>7zip</a>. I usually keep my MinGW installations directly on <code>C:\</code>, so this one lives at <code>C:\mingw64</code> on my system. To make the tools accessible on the command line, you&rsquo;ll need to add <code>C:\mingw64\bin</code> to your <code>PATH</code> environment variable. That&rsquo;s it already, installation done.</p><p><a href=https://cmake.org>CMake</a> comes with its own installer, so setting it up on Windows is easy and straight forward. In addition I use <a href=https://cmder.app/>cmder</a> as console emulator on Windows &mdash; IMO much more comfortable than the default command line, but of course the normal command line will do as well.</p><p>Before we can build the plugin, we will need to create some build instructions, helping CMake understand what we expect it to do. Here&rsquo;s a simple <code>CMakeLists.txt</code> file I used to compile the example plugin:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cmake data-lang=cmake><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#8be9fd;font-style:italic>cmake_minimum_required</span> (<span style=color:#f1fa8c>VERSION</span> <span style=color:#f1fa8c>3.2</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#8be9fd;font-style:italic>set</span>(<span style=color:#f1fa8c>CMAKE_C_COMPILER</span> <span style=color:#f1fa8c>&#34;gcc&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#8be9fd;font-style:italic>set</span>(<span style=color:#f1fa8c>CMAKE_CXX_COMPILER</span> <span style=color:#f1fa8c>&#34;g++&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#8be9fd;font-style:italic>project</span> (<span style=color:#f1fa8c>DaemoPlug</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#6272a4># Detect SDK
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>get_filename_component</span>(<span style=color:#f1fa8c>SDK_PATH</span> <span style=color:#f1fa8c>&#34;./SDK/&#34;</span> <span style=color:#f1fa8c>ABSOLUTE</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#8be9fd;font-style:italic>message</span>(<span style=color:#f1fa8c>&#34;-- Detecting X-Plane SDK path&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#8be9fd;font-style:italic>if</span>(<span style=color:#f1fa8c>NOT</span> <span style=color:#f1fa8c>EXISTS</span> <span style=color:#ff79c6>${</span><span style=color:#8be9fd;font-style:italic>SDK_PATH</span><span style=color:#ff79c6>}</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>    <span style=color:#8be9fd;font-style:italic>message</span>(<span style=color:#f1fa8c>FATAL_ERROR</span> <span style=color:#f1fa8c>&#34;Missing SDK folder: ${SDK_PATH}&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#8be9fd;font-style:italic>endif</span>(<span style=color:#f1fa8c>NOT</span> <span style=color:#f1fa8c>EXISTS</span> <span style=color:#ff79c6>${</span><span style=color:#8be9fd;font-style:italic>SDK_PATH</span><span style=color:#ff79c6>}</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#6272a4># Copy symbol collisions file
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>configure_file</span>(<span style=color:#f1fa8c>&#34;src/collisions&#34;</span> <span style=color:#f1fa8c>&#34;collisions&#34;</span> <span style=color:#f1fa8c>COPYONLY</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span><span style=color:#6272a4># Global compiler flags
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>set</span> (<span style=color:#f1fa8c>GCC_DEFAULT_FLAGS</span> <span style=color:#f1fa8c>-std=c17</span> <span style=color:#f1fa8c>-Wall</span> <span style=color:#f1fa8c>-Wunreachable-code</span> <span style=color:#f1fa8c>-pipe</span> <span style=color:#f1fa8c>-Wextra</span> <span style=color:#f1fa8c>-Wshadow</span> <span style=color:#f1fa8c>-Wfloat-equal</span> <span style=color:#f1fa8c>-pedantic</span> <span style=color:#f1fa8c>-fvisibility=hidden</span> <span style=color:#f1fa8c>-O2</span> <span style=color:#f1fa8c>-fmessage-length=0</span> <span style=color:#f1fa8c>-D_FORTIFY_SOURCE=2</span> <span style=color:#f1fa8c>-fstack-protector</span> <span style=color:#f1fa8c>-funwind-tables</span> <span style=color:#f1fa8c>-fasynchronous-unwind-tables</span> <span style=color:#f1fa8c>-W</span> <span style=color:#f1fa8c>-DXPLM200</span> <span style=color:#f1fa8c>-DXPLM210</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#8be9fd;font-style:italic>set</span> (<span style=color:#f1fa8c>GXX_DEFAULT_FLAGS</span> <span style=color:#f1fa8c>-std=c++17</span> <span style=color:#f1fa8c>-Wall</span> <span style=color:#f1fa8c>-Wunreachable-code</span> <span style=color:#f1fa8c>-pipe</span> <span style=color:#f1fa8c>-Wextra</span> <span style=color:#f1fa8c>-Wshadow</span> <span style=color:#f1fa8c>-Wfloat-equal</span> <span style=color:#f1fa8c>-pedantic</span> <span style=color:#f1fa8c>-fvisibility=hidden</span> <span style=color:#f1fa8c>-O2</span> <span style=color:#f1fa8c>-fmessage-length=0</span> <span style=color:#f1fa8c>-D_FORTIFY_SOURCE=2</span> <span style=color:#f1fa8c>-fstack-protector</span> <span style=color:#f1fa8c>-funwind-tables</span> <span style=color:#f1fa8c>-fasynchronous-unwind-tables</span> <span style=color:#f1fa8c>-W</span> <span style=color:#f1fa8c>-DXPLM200</span> <span style=color:#f1fa8c>-DXPLM210</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span><span style=color:#6272a4># Include files
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>include_directories</span> (<span style=color:#f1fa8c>&#34;./src&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span><span style=color:#8be9fd;font-style:italic>include_directories</span> (<span style=color:#f1fa8c>&#34;${SDK_PATH}&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span><span style=color:#8be9fd;font-style:italic>include_directories</span> (<span style=color:#f1fa8c>&#34;${SDK_PATH}/CHeaders/XPLM&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span><span style=color:#8be9fd;font-style:italic>include_directories</span> (<span style=color:#f1fa8c>&#34;${SDK_PATH}/CHeaders/Wrappers&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span><span style=color:#8be9fd;font-style:italic>include_directories</span> (<span style=color:#f1fa8c>&#34;${SDK_PATH}/CHeaders/Widgets&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span><span style=color:#8be9fd;font-style:italic>file</span>(<span style=color:#f1fa8c>GLOB_RECURSE</span> <span style=color:#f1fa8c>SOURCES</span> <span style=color:#f1fa8c>&#34;src/*.c&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span><span style=color:#8be9fd;font-style:italic>if</span>(<span style=color:#f1fa8c>WIN32</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span>    <span style=color:#8be9fd;font-style:italic>cmake_policy</span>(<span style=color:#f1fa8c>SET</span> <span style=color:#f1fa8c>CMP0015</span> <span style=color:#f1fa8c>NEW</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span>    <span style=color:#8be9fd;font-style:italic>set</span> (<span style=color:#f1fa8c>CMAKE_C_COMPILER</span> <span style=color:#f1fa8c>x86_64-w64-mingw32-gcc</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span>    <span style=color:#8be9fd;font-style:italic>set</span> (<span style=color:#f1fa8c>CMAKE_CXX_COMPILER</span> <span style=color:#f1fa8c>x86_64-w64-mingw32-g++</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span>    <span style=color:#8be9fd;font-style:italic>link_directories</span>(<span style=color:#f1fa8c>&#34;${SDK_PATH}/Libraries/Win&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span><span>    <span style=color:#8be9fd;font-style:italic>add_library</span>(<span style=color:#f1fa8c>WIN_RELEASE_64</span> <span style=color:#f1fa8c>SHARED</span> <span style=color:#ff79c6>${</span><span style=color:#8be9fd;font-style:italic>SOURCES</span><span style=color:#ff79c6>}</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span><span>    <span style=color:#8be9fd;font-style:italic>target_compile_options</span>(<span style=color:#f1fa8c>WIN_RELEASE_64</span> <span style=color:#f1fa8c>PRIVATE</span> <span style=color:#ff79c6>${</span><span style=color:#8be9fd;font-style:italic>GCC_DEFAULT_FLAGS</span><span style=color:#ff79c6>}</span> <span style=color:#f1fa8c>-s</span> <span style=color:#f1fa8c>-c</span> <span style=color:#f1fa8c>-fno-stack-protector</span> <span style=color:#f1fa8c>-static-libgcc</span> <span style=color:#f1fa8c>-static-libstdc++</span> <span style=color:#f1fa8c>-DXPLM200</span> <span style=color:#f1fa8c>-DIBM</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span><span>    <span style=color:#8be9fd;font-style:italic>target_link_libraries</span>(<span style=color:#f1fa8c>WIN_RELEASE_64</span> <span style=color:#f1fa8c>XPLM_64</span> <span style=color:#f1fa8c>XPWidgets_64</span> <span style=color:#f1fa8c>-static-libgcc</span> <span style=color:#f1fa8c>-static-libstdc++</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span><span>    <span style=color:#8be9fd;font-style:italic>set_target_properties</span>(<span style=color:#f1fa8c>WIN_RELEASE_64</span> <span style=color:#f1fa8c>PROPERTIES</span> <span style=color:#f1fa8c>LINK_FLAGS</span> <span style=color:#f1fa8c>&#34;-s -Wl,--version-script=collisions&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span><span>    <span style=color:#8be9fd;font-style:italic>set_target_properties</span>(<span style=color:#f1fa8c>WIN_RELEASE_64</span> <span style=color:#f1fa8c>PROPERTIES</span> <span style=color:#f1fa8c>PREFIX</span> <span style=color:#f1fa8c>&#34;&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span><span>    <span style=color:#8be9fd;font-style:italic>set_target_properties</span>(<span style=color:#f1fa8c>WIN_RELEASE_64</span> <span style=color:#f1fa8c>PROPERTIES</span> <span style=color:#f1fa8c>SUFFIX</span> <span style=color:#f1fa8c>&#34;&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span><span>    <span style=color:#8be9fd;font-style:italic>set_target_properties</span>(<span style=color:#f1fa8c>WIN_RELEASE_64</span> <span style=color:#f1fa8c>PROPERTIES</span> <span style=color:#f1fa8c>LIBRARY_OUTPUT_DIRECTORY</span> <span style=color:#f1fa8c>&#34;DaemoPlug/64/&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44</span><span>    <span style=color:#8be9fd;font-style:italic>set_target_properties</span>(<span style=color:#f1fa8c>WIN_RELEASE_64</span> <span style=color:#f1fa8c>PROPERTIES</span> <span style=color:#f1fa8c>OUTPUT_NAME</span> <span style=color:#f1fa8c>&#34;win.xpl&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45</span><span><span style=color:#8be9fd;font-style:italic>endif</span>()
</span></span></code></pre></div><p>This CMake file instructs CMake to</p><ol><li>use <code>gcc</code> as compiler</li><li>detect the SDK path</li><li>define global compiler flags, including the X-Plane API versions we want to use (<code>-DXPLM200</code>)</li><li>define include directories including our source folder and the SDK headers</li><li>consider all <code>*.c</code> files in <code>src/</code> as source files</li><li>explicitly use the 64 bit mingw compilers on Windows</li><li>build a shared library linked against the Windows-specific libraries in the SDK, and name it <code>win.xpl</code></li></ol><p>You can amend all this to your needs &mdash; you can add the <code>XPLM300</code>, <code>XPLM301</code> and <code>XPLM303</code> APIs if you want to address only X-Plane 11.50 and newer, or use the Fat Plugins (XPLM 3.0 API) format instead of the Fat Plugins (XPLM 2.1 API) format used in the example above.</p><p>To build the plugin, issue these instructions on a command line in the project folder:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cmd data-lang=cmd><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6>mkdir</span> build
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#ff79c6>cd</span> build
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>cmake -G <span style=color:#f1fa8c>&#34;MinGW Makefiles&#34;</span> ../
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>mingw32-make
</span></span></code></pre></div><h4 id=does-it-work>Does It Work?</h4><p>Now we have build our plugin, it&rsquo;s time to see if it actually loads in X-Plane. in <code>X-Plane/Resources/plugins</code> create a folder <code>DaemoPlug</code> (or whatever you&rsquo;d like to call it), and a subfolder <code>64</code>. Copy the freshly created <code>win.xpl</code> file into that subfolder and launch X-Plane. In X-Plane&rsquo;s log file, you should find a line similar to this one:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>Loaded: D:\X-Plane 12/Resources/plugins/DaemoPlug/64/win.xpl (net.daemotron.plugin).
</span></span></code></pre></div><p>Also in the Plugin Admin window X-Plane will show you the plugin:</p><p><img src=images/xp-plugin-admin.png alt="X-Plane Plugin Admin"></p><h4 id=building-on-mac-and-linux>Building on Mac and Linux</h4><p>To build the plugin on Mac or Linux, the respective build tools have to be installed. For Mac, this would be <a href=https://developer.apple.com/xcode/>Xcode</a> (or at least the Xcode command line tools), and on Linux, at least GCC and GNU make would be required (Ubuntu provides all required tools in the <a href=https://packages.ubuntu.com/jammy/build-essential>build-essential</a> package).</p><p>Also currently our CMakeLists.txt only covers building on Windows. Adding these parts to the bottom of the file will enable builds on Linux and Mac:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cmake data-lang=cmake><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#8be9fd;font-style:italic>if</span>(<span style=color:#f1fa8c>LINUX</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>    <span style=color:#8be9fd;font-style:italic>add_library</span>(<span style=color:#f1fa8c>LIN_RELEASE_64</span> <span style=color:#f1fa8c>SHARED</span> <span style=color:#ff79c6>${</span><span style=color:#8be9fd;font-style:italic>SOURCES</span><span style=color:#ff79c6>}</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>    <span style=color:#8be9fd;font-style:italic>target_compile_options</span>(<span style=color:#f1fa8c>LIN_RELEASE_64</span> <span style=color:#f1fa8c>PRIVATE</span> <span style=color:#ff79c6>${</span><span style=color:#8be9fd;font-style:italic>GCC_DEFAULT_FLAGS</span><span style=color:#ff79c6>}</span> <span style=color:#f1fa8c>-m64</span> <span style=color:#f1fa8c>-fPIC</span> <span style=color:#f1fa8c>-DLIN</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>    <span style=color:#8be9fd;font-style:italic>set_target_properties</span>(<span style=color:#f1fa8c>LIN_RELEASE_64</span> <span style=color:#f1fa8c>PROPERTIES</span> <span style=color:#f1fa8c>LINK_FLAGS</span> <span style=color:#f1fa8c>&#34;-Wl,--version-script=collisions&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>    <span style=color:#8be9fd;font-style:italic>set_target_properties</span>(<span style=color:#f1fa8c>LIN_RELEASE_64</span> <span style=color:#f1fa8c>PROPERTIES</span> <span style=color:#f1fa8c>PREFIX</span> <span style=color:#f1fa8c>&#34;&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>    <span style=color:#8be9fd;font-style:italic>set_target_properties</span>(<span style=color:#f1fa8c>LIN_RELEASE_64</span> <span style=color:#f1fa8c>PROPERTIES</span> <span style=color:#f1fa8c>SUFFIX</span> <span style=color:#f1fa8c>&#34;&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>    <span style=color:#8be9fd;font-style:italic>set_target_properties</span>(<span style=color:#f1fa8c>LIN_RELEASE_64</span> <span style=color:#f1fa8c>PROPERTIES</span> <span style=color:#f1fa8c>LIBRARY_OUTPUT_DIRECTORY</span> <span style=color:#f1fa8c>&#34;DaemoPlug/64/&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    <span style=color:#8be9fd;font-style:italic>set_target_properties</span>(<span style=color:#f1fa8c>LIN_RELEASE_64</span> <span style=color:#f1fa8c>PROPERTIES</span> <span style=color:#f1fa8c>OUTPUT_NAME</span> <span style=color:#f1fa8c>&#34;lin.xpl&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#8be9fd;font-style:italic>endif</span>()
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#8be9fd;font-style:italic>if</span>(<span style=color:#f1fa8c>APPLE</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>    <span style=color:#8be9fd;font-style:italic>cmake_policy</span>(<span style=color:#f1fa8c>SET</span> <span style=color:#f1fa8c>CMP0042</span> <span style=color:#f1fa8c>NEW</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>    <span style=color:#8be9fd;font-style:italic>set</span> (<span style=color:#f1fa8c>CMAKE_SYSTEM_NAME</span> <span style=color:#f1fa8c>Darwin</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>    <span style=color:#8be9fd;font-style:italic>set</span> (<span style=color:#f1fa8c>CMAKE_CXX_COMPILER</span> <span style=color:#f1fa8c>g++</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>    <span style=color:#8be9fd;font-style:italic>set</span> (<span style=color:#f1fa8c>CMAKE_OSX_ARCHITECTURES</span> <span style=color:#f1fa8c>&#34;x86_64;arm64&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>    <span style=color:#8be9fd;font-style:italic>add_library</span>(<span style=color:#f1fa8c>MAC_RELEASE_64</span> <span style=color:#f1fa8c>SHARED</span> <span style=color:#ff79c6>${</span><span style=color:#8be9fd;font-style:italic>SOURCES</span><span style=color:#ff79c6>}</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>    <span style=color:#8be9fd;font-style:italic>target_compile_options</span>(<span style=color:#f1fa8c>MAC_RELEASE_64</span> <span style=color:#f1fa8c>PRIVATE</span> <span style=color:#ff79c6>${</span><span style=color:#8be9fd;font-style:italic>GCC_DEFAULT_FLAGS</span><span style=color:#ff79c6>}</span> <span style=color:#f1fa8c>-nostdinc++</span> <span style=color:#f1fa8c>-I/Library/Developer/CommandLineTools/usr/include/c++/v1</span> <span style=color:#f1fa8c>-DXPLM200</span> <span style=color:#f1fa8c>-DAPL</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>    <span style=color:#8be9fd;font-style:italic>target_link_libraries</span>(<span style=color:#f1fa8c>MAC_RELEASE_64</span> <span style=color:#f1fa8c>&#34;-F${SDK_PATH}/Libraries/Mac&#34;</span> <span style=color:#f1fa8c>&#34;-framework XPLM&#34;</span> <span style=color:#f1fa8c>&#34;-framework XPWidgets&#34;</span> <span style=color:#f1fa8c>&#34;-framework OpenGL&#34;</span> <span style=color:#f1fa8c>&#34;-nodefaultlibs&#34;</span> <span style=color:#f1fa8c>&#34;-lc++&#34;</span> <span style=color:#f1fa8c>&#34;-lc++abi&#34;</span> <span style=color:#f1fa8c>&#34;-lm&#34;</span> <span style=color:#f1fa8c>&#34;-lc&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>    <span style=color:#8be9fd;font-style:italic>set_target_properties</span>(<span style=color:#f1fa8c>MAC_RELEASE_64</span> <span style=color:#f1fa8c>PROPERTIES</span> <span style=color:#f1fa8c>LINK_FLAGS</span> <span style=color:#f1fa8c>&#34;-m64 -fvisibility=hidden&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>    <span style=color:#8be9fd;font-style:italic>set_target_properties</span>(<span style=color:#f1fa8c>MAC_RELEASE_64</span> <span style=color:#f1fa8c>PROPERTIES</span> <span style=color:#f1fa8c>PREFIX</span> <span style=color:#f1fa8c>&#34;&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>    <span style=color:#8be9fd;font-style:italic>set_target_properties</span>(<span style=color:#f1fa8c>MAC_RELEASE_64</span> <span style=color:#f1fa8c>PROPERTIES</span> <span style=color:#f1fa8c>SUFFIX</span> <span style=color:#f1fa8c>&#34;&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>    <span style=color:#8be9fd;font-style:italic>set_target_properties</span>(<span style=color:#f1fa8c>MAC_RELEASE_64</span> <span style=color:#f1fa8c>PROPERTIES</span> <span style=color:#f1fa8c>LIBRARY_OUTPUT_DIRECTORY</span> <span style=color:#f1fa8c>&#34;DaemoPlug/64/&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>    <span style=color:#8be9fd;font-style:italic>set_target_properties</span>(<span style=color:#f1fa8c>MAC_RELEASE_64</span> <span style=color:#f1fa8c>PROPERTIES</span> <span style=color:#f1fa8c>OUTPUT_NAME</span> <span style=color:#f1fa8c>&#34;mac.xpl&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span><span style=color:#8be9fd;font-style:italic>endif</span>()
</span></span></code></pre></div><p>Building the plugin on these systems is similar to Windows, with just one difference &mdash; they use <code>(g)make</code> instead of <code>mingw32-make</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>mkdir build
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#8be9fd;font-style:italic>cd</span> build
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>cmake ../
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>make
</span></span></code></pre></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Source: <a href=http://dashboard.x-plane.com/>X-Plane Usage Data</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=footer><div class=tags><i class="fa fa-tags"></i><div class=links><a href=https://www.my-universe.com/tags/x-plane/>X-Plane</a>
<a href=https://www.my-universe.com/tags/development/>Development</a>
<a href=https://www.my-universe.com/tags/c/c++/>C/C++</a></div></div></div></article></div><div id=comments-container></div></div><footer><div class=container><div class=recent-posts><strong>Latest posts</strong><ul><li><a href=https://www.my-universe.com/2024/04/06/configuration-to-go/>Configuration to Go</a></li><li><a href=https://www.my-universe.com/2023/10/31/elegant-python-exceptions/>Elegant Python Exceptions</a></li><li><a href=https://www.my-universe.com/2023/09/27/dataref-caching-revisited/>Dataref Caching Revisited</a></li><li><a href=https://www.my-universe.com/2023/09/23/configuration-file-with-xppl/>Configuration File with XPPL</a></li><li><a href=https://www.my-universe.com/2023/09/22/introducing-xppl/>Introducing XPPL</a></li><li><a href=https://www.my-universe.com/2023/04/20/cache-your-datarefs/>Cache Your Datarefs</a></li><li><a href=https://www.my-universe.com/2023/01/14/talk-to-the-log/>Talk to the Log</a></li></ul></div><div class=categories><a href=https://www.my-universe.com/categories/><strong>Categories</strong></a><ul><li><a href=https://www.my-universe.com/categories/x-plane/>X-Plane (3)</a></li><li><a href=https://www.my-universe.com/categories/website/>Website (2)</a></li><li><a href=https://www.my-universe.com/categories/go/>Go (1)</a></li><li><a href=https://www.my-universe.com/categories/python/>Python (1)</a></li></ul></div><div class=right><div class=external-profiles><strong>Social media</strong>
<a href=https://github.com/daemotron target=_blank rel><em class="fab fa-github"></em></a>
<a href=https://gitlab.com/daemotron target=_blank rel><em class="fab fa-gitlab"></em></a>
<a href=https://stackoverflow.com/users/5217009/daemotron target=_blank rel=me><em class="fab fa-stack-overflow"></em></a>
<a href=https://www.linkedin.com/in/jescofreund target=_blank rel><em class="fab fa-linkedin"></em></a>
<a href=/index.xml target=_blank rel><em class="fas fa-rss"></em></a></div><div class=archive><a href=https://www.my-universe.com/archive/><strong>Archive</strong></a></div></div></div></footer><div class=credits><div class=container><div class=copyright><a href=https://www.my-universe.com/ target=_blank>&copy;
2017 - 2025
My Universe</a></div><div class=author><a href=https://gohugo.io/ target=_blank>Powered by Hugo & Bilberry Hugo Theme</a></div></div></div><script src=https://www.my-universe.com/theme.js></script></body></html>