<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>CMake Linux Hack | My Universe</title><meta name=author content="daemotron"><meta name=description content="Beginning with its most recent version (3.25 at the time of writing this post), CMake provides the LINUX variable, which I used in my previous post. Of course, developers on Linux tend to use the version of CMake they can install from their distribution&rsquo;s package manager. On Ubuntu 22.04 LTS that would be 3.22, and even on the most recent Ubuntu version (22.10) we&rsquo;re at 3.24 &mdash; meaning this variable is not available in these CMake versions."><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="CMake Linux Hack"><meta name=twitter:description content="Beginning with its most recent version (3.25 at the time of writing this post), CMake provides the LINUX variable, which I used in my previous post. Of course, developers on Linux tend to use the version of CMake they can install from their distribution&rsquo;s package manager. On Ubuntu 22.04 LTS that would be 3.22, and even on the most recent Ubuntu version (22.10) we&rsquo;re at 3.24 &mdash; meaning this variable is not available in these CMake versions."><meta property="og:title" content="CMake Linux Hack"><meta property="og:description" content="Beginning with its most recent version (3.25 at the time of writing this post), CMake provides the LINUX variable, which I used in my previous post. Of course, developers on Linux tend to use the version of CMake they can install from their distribution&rsquo;s package manager. On Ubuntu 22.04 LTS that would be 3.22, and even on the most recent Ubuntu version (22.10) we&rsquo;re at 3.24 &mdash; meaning this variable is not available in these CMake versions."><meta property="og:type" content="article"><meta property="og:url" content="https://daemotron.github.io/2023/01/11/cmake-linux-hack/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-11T00:16:46+01:00"><meta property="article:modified_time" content="2023-01-11T00:16:46+01:00"><link rel=stylesheet href=/css/bootstrap.min.css crossorigin=anonymous><link href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css rel=stylesheet type=text/css><link rel=stylesheet href=/sass/main.css><link rel=stylesheet href=/zoomjs/zoom.min.css><script src=/js/lazysizes.min.js></script>
<link rel=apple-touch-icon href=/apple-touch-icon.png><link rel="shortcut icon" href=/favicon.png type=image/x-icon><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=icon href=/logo.svg sizes=any type=image/svg+xml></head><body><nav class="navbar navbar-default navbar-custom navbar-fixed-top invert"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=https://daemotron.github.io/>My Universe</a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=/ title=Home>Home</a></li><li><a href=/archive/ title=Archive>Archive</a></li><li><a href=/about/ title=About>About</a></li><li><a href=https://github.com/daemotron/daemotron.github.io/ title=Github>Github</a></li><li class=search-icon><a href=javascript:void(0)><i class="fa fa-search"></i></a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse"),__HuxNav__={close:function(){$navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)},open:function(){$collapse.style.height="auto",$navbar.className+=" in"}};$toggle.addEventListener("click",function(){$navbar.className.indexOf("in")>0?__HuxNav__.close():__HuxNav__.open()}),document.addEventListener("click",function(e){if(e.target==$toggle)return;if(e.target.className=="icon-bar")return;__HuxNav__.close()})</script><div class=search-page><div class=search-icon-close-container><span class=search-icon-close><i class="fa fa-chevron-down"></i></span></div><div class="search-main container"><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><form></form><input type=text id=search-input placeholder="$ grep..."></form><div id=search-results class=mini-post-list></div></div></div></div></div><style type=text/css>header.intro-header{position:relative;background-image:url('')}</style><header class="intro-header style-text"><div class=header-mask></div><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><div class=tags><a class=tag href=/tags/cmake/ title=cmake>cmake</a>
<a class=tag href=/tags/development/ title=development>development</a>
<a class=tag href=/tags/c/c++/ title=c/c++>c/c++</a></div><h1>CMake Linux Hack</h1><h2 class=subheading></h2><span class=meta>Posted by daemotron
on Wed, Jan 11, 2023</span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container"><p>Beginning with its most recent version (3.25 at the time of writing this post), <a href=https://cmake.org/ target=_blank>CMake</a> provides the <a href=https://cmake.org/cmake/help/latest/variable/LINUX.html target=_blank>LINUX</a> variable, which I used in <a href=/2023/01/04/x-plane-plugin-boilerplate/ target=_blank>my previous post</a>. Of course, developers on Linux tend to use the version of CMake they can install from their distribution&rsquo;s package manager. On Ubuntu 22.04 LTS that would be 3.22, and even on the most recent Ubuntu version (22.10) we&rsquo;re at 3.24 &mdash; meaning this variable is not available in these CMake versions.</p><p>To work around this issue for older CMake versions, there&rsquo;s a simple, yet effective hack &mdash; just insert this somewhere at the top of your <code>CMakeLists.txt</code> file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cmake data-lang=cmake><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#8be9fd;font-style:italic>if</span>(<span style=color:#f1fa8c>CMAKE_VERSION</span> <span style=color:#f1fa8c>VERSION_LESS</span> <span style=color:#f1fa8c>&#34;3.25&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    <span style=color:#8be9fd;font-style:italic>if</span>(<span style=color:#f1fa8c>UNIX</span> <span style=color:#f1fa8c>AND</span> <span style=color:#f1fa8c>NOT</span> <span style=color:#f1fa8c>APPLE</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>        <span style=color:#8be9fd;font-style:italic>set</span>(<span style=color:#f1fa8c>LINUX</span> <span style=color:#f1fa8c>TRUE</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>        <span style=color:#8be9fd;font-style:italic>message</span>(<span style=color:#f1fa8c>&#34;-- Linux detected&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>    <span style=color:#8be9fd;font-style:italic>endif</span>()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#8be9fd;font-style:italic>endif</span>()
</span></span></code></pre></div><p>This little piece of CMake script sets the <code>LINUX</code> variable to <code>true</code> if the CMake version is less than 3.25, running on a unixoid system, but not on an Apple system. Of course this is not really a correct way to detect whether we&rsquo;re on Linux or not &mdash; this condition would be <code>true</code> on a lot of different systems (BSDs, Cygwin, etc.). However, given we&rsquo;d build an X-Plane plugin only on Windows, macOS and Linux, this condition is sufficient to rule out Windows and macOS, leaving only Linux as possibility. Just keep this in mind when copying a <code>CMakeLists.txt</code> file or parts of it for using them in other projects&mldr;</p><hr style=visibility:hidden><ul class=pager><li class=previous><a href=/2023/01/04/x-plane-plugin-boilerplate/ data-toggle=tooltip data-placement=top title="X-Plane Plugin Boilerplate">Previous<br><span>X-Plane Plugin Boilerplate</span></a></li><li class=next><a href=/2023/01/14/talk-to-the-log/ data-toggle=tooltip data-placement=top title="Talk to the Log">Next<br><span>Talk to the Log</span></a></li></ul><hr style=visibility:hidden></div><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
sidebar-container"><section><hr class="hidden-sm hidden-xs"><h5>FEATURED TAGS</h5><div class=tags><a href=/tags/blog/>blog</a>
<a href=/tags/c/c++/>c/c++</a>
<a href=/tags/cmake/>cmake</a>
<a href=/tags/development/>development</a>
<a href=/tags/django/>django</a>
<a href=/tags/git/>git</a>
<a href=/tags/github/>github</a>
<a href=/tags/hubpress/>hubpress</a>
<a href=/tags/hugo/>hugo</a>
<a href=/tags/python/>python</a>
<a href=/tags/x-plane/>x-plane</a></div></section></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a href=https://github.com/daemotron target=_blank><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/jescofreund target=_blank><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://gitlab.com/daemotron target=_blank><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i>
<i class="fab fa-gitlab fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://stackoverflow.com/users/5217009/daemotron target=_blank><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i>
<i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i></span></a></li><li><a href=/index.xml target=_blank><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; My Universe 2023<br>Powered by <a href=https://gohugo.io>Hugo</a></p></div></div></div></footer><script src=/js/jquery.min.js></script>
<script src=/js/bootstrap.min.js crossorigin=anonymous></script>
<script src=/js/hux-blog.min.c4ea77041cd3edbfc8b2622cd887a9a5d8760a4162d14489e36d2a3fa4c90172.js></script>
<script src=/js/simple-jekyll-search.min.js></script>
<script src=/js/search.min.53bce5da475b4d362500e5ce5dddfa22e20e1b9018777411d2020b4b839c9310.js></script>
<script src=/zoomjs/zoom.min.js></script></body></html>